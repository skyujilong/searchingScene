define("alipay/xbox/1.1.5/xbox",["$","arale/dialog/1.2.6/dialog","arale/overlay/1.1.4/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/overlay/1.1.4/mask","arale/templatable/0.9.2/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime","alipay/object-shim/1.0.1/object-shim","./xbox.css"],function(a,b,c){function d(a){var b=a.match(/([^?#]*)(\?[^#]*)?(#.*)?/);return b.shift(),b[1]=(b[1]&&"?"!==b[1]?b[1]+"&":"?")+"_xbox=true",b.join("")}function e(a,b){var c=b>a?.35*(b-a):30;return Math.max(c,30)}function f(){for(var a,b="AP.widget.xBox".split("."),c=window;a=b.shift();)a&&(c[a]||(c[a]={}),c=c[a]);return c}var g,h=a("$"),i=a("arale/dialog/1.2.6/dialog"),j=a("alipay/object-shim/1.0.1/object-shim");a("./xbox.css");var k=i.extend({attrs:{classPrefix:"alipay-xbox",top:"",isOld:!1,align:{getter:function(a){var b=this._syncTop();return a.selfXY=b.selfXY,a.baseXY=b.baseXY,a}}},setup:function(){k.superclass.setup.call(this),this.set("effect","none"),j(this),this._setupOld(),this._setupTop(),this._setupLoading(),this._setupAnimation()},_setupTop:function(){this.on("complete:show",function(){var a=this;setTimeout(function(){a.element&&a._setPosition()},500)}),this.after("_syncHeight",function(){var a=this.element.css("height");this._tmpHeight!==a&&(this._setPosition(),this._tmpHeight=a)})},_setupOld:function(){this.get("isOld")&&this.set("closeTpl",""),this.after("show",function(){var a=this;if(this.get("isOld")&&"iframe"===this._type){var b=f();b.hide&&(g=b.hide),b.hide=function(){a.hide()}}}),this.before("hide",function(){if(this.get("isOld")){var a=f();a.hide&&(g?(a.hide=g,g=null):delete a.hide)}})},_setupLoading:function(){var a,b,c='<div class="'+this.get("classPrefix")+'-loading"></div>',d=h(c).hide().insertBefore(this.$("[data-role=content]"));this.after("show",function(){"iframe"===this._type&&(d.css("width",0).show(),b=10,a=setInterval(function(){b+=2,80>=b?d.css("width",b+"%"):(clearInterval(a),setInterval(function(){b++,100>=b&&d.css("width",b+"%")},1e3))},150))}),this.on("complete:show",function(){clearInterval(a),d.animate({width:"100%"},400,function(){d.fadeOut(400)})})},_onRenderTop:function(){this.element&&this._setPosition()},_syncTop:function(){var a=this.get("top");if(a)return{selfXY:["50%",0],baseXY:["50%",a]};var b=parseInt(this.element.innerHeight(),10),c=h(window).height();return a=e(b,c),{selfXY:["50%",0],baseXY:["50%",a]}},_fixUrl:function(){var a=k.superclass._fixUrl.call(this);return d(a)},_setupFocus:function(){},_setupAnimation:function(){"none"===this.get("effect")&&this.after("show",function(){this.element.addClass("alipay-xbox-show").removeClass("alipay-xbox-hide")}).after("hide",function(){this.element.addClass("alipay-xbox-hide").removeClass("alipay-xbox-show")})}});c.exports=k,c.exports._niceTop=e,c.exports.outerBoxClass="alipay-xbox-1_1_5"}),define("alipay/xbox/1.1.5/xbox.css",[],function(){seajs.importStyle(".alipay-xbox-1_1_5 .alipay-xbox{background-color:rgba(0,0,0,.5);FILTER:progid:DXImageTransform.Microsoft.Gradient(startColorstr=#88000000, endColorstr=#88000000);padding:6px;-webkit-transition:height .3s ease-in-out .3s;-moz-transition:height .3s ease-in-out .3s;-o-transition:height .3s ease-in-out .3s;-ms-transition:height .3s ease-in-out .3s;transition:height .3s ease-in-out .3s;border:0}:root .alipay-xbox-1_1_5 .alipay-xbox{FILTER:none\\9}.alipay-xbox-1_1_5 .alipay-xbox-content{background:#fff;height:100%;*zoom:1}.alipay-xbox-1_1_5 .alipay-xbox-close{color:#999;cursor:pointer;display:block;font-family:tahoma;font-size:24px;font-weight:700;height:18px;line-height:14px;position:absolute;right:16px;text-decoration:none;top:16px;z-index:10}.alipay-xbox-1_1_5 .alipay-xbox-close:hover{color:#666;text-shadow:0 0 2px #aaa}.alipay-xbox-1_1_5 .alipay-xbox-loading{border-radius:10px;position:absolute;top:-2px;*top:0;top:0\\0;left:0;background:#CBFE1C;box-shadow:0 0 12px #CBFE1C;height:2px;zoom:1;overflow:hidden}.alipay-xbox-1_1_5 .alipay-xbox,.alipay-xbox-1_1_5 .alipay-xbox-hide{-webkit-transform:scale(0.7);-moz-transform:scale(0.7);-ms-transform:scale(0.7);transform:scale(0.7);opacity:0;-webkit-transition:opacity .2s,transform .2s;-moz-transition:opacity .2s,transform .2s;transition:opacity .2s,transform .2s}.alipay-xbox-1_1_5 .alipay-xbox-show{-webkit-transform:none;-moz-transform:none;-ms-transform:none;transform:none;opacity:1}")});
